# SPDX-License-Identifier: (GPL-2.0 OR BSD-2-Clause)
%YAML 1.2
---
$id: http://devicetree.org/schemas/motion/motion-simple-pwm.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: Simple PWM based motor controller

maintainers:
  - David Jander <david@protonic>

description:
  Simple motor control device based on 1 or 2 PWM outputs

properties:
  compatible:
    enum:
      - motion-simple-pwm

  pwms:
    items:
      - description: First PWM channel, can be used for left or right direction.
      - description: Optional second PWM channel for the opposite direction.
    minItems: 1

  pwm-names:
    items:
      - const: left
      - const: right
    minItems: 1

  pwm-inverted:
    $ref: /schemas/types.yaml#/definitions/flag
    description:
      If present, this flag indicates that the PWM signal should be inverted.
      The duty-cycle will be scaled from 100% down to 0% instead 0% to 100%.

required:
  - compatible
  - pwms
  - pwm-names

allOf:
  - $ref: /schemas/motion/common.yaml#

unevaluatedProperties: false

examples:
  - |
    // This example shows how to use the TI DRV8873 or similar motor controllers
    // with this driver
    motor0 {
      compatible = "motion-simple-pwm";
      pwms = <&hpdcm0_pwm 0 50000 0>,
             <&hpdcm0_pwm 1 50000 0>;
      pwm-names = "left", "right";
      pwm-inverted;
      speed-conv-mul = <3600>;
      speed-conv-div = <100000>;
      acceleration-conv-mul = <3600>;
      acceleration-conv-div = <100000>;
    };
